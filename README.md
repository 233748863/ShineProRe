# ShineProRe - 技能循环引擎 🎮

一个基于**现代化软件架构**的技能循环释放引擎，采用**依赖注入**和**策略模式**设计，具备高度模块化、可扩展、安全可靠的特性。该项目已实现完整的桌面应用界面和性能优化体系。

## ✨ 核心特性（最终版）

### 🏗️ 现代化架构
- **依赖注入容器** - 类型安全的依赖管理
- **策略模式系统** - 支持运行时算法切换
- **插件化设计** - 易于扩展新功能
- **环境配置管理** - 开发/生产环境自动切换

### 🖥️ 桌面应用界面
- **现代暗色主题** - 美观的PyQt6界面
- **系统托盘支持** - 最小化到托盘运行
- **实时状态监控** - 可视化运行状态
- **热键控制** - 快捷键启动/暂停/停止

### 🔒 安全可靠
- **统一异常处理** - 智能异常分类和重试机制
- **权限控制系统** - 操作权限和频率限制
- **性能监控体系** - 实时性能统计和报告
- **内存管理优化** - 自动内存清理和监控

### ⚡ 高效智能
- **自适应延迟** - 智能调整响应时间
- **统一缓存管理** - 多级缓存策略优化
- **异步处理** - 非阻塞式技能检测
- **图像缓存优化** - 高效的图像处理机制

## 📁 项目结构

```
ShineProRe/
├── core/                    # 核心逻辑模块
│   ├── 技能状态检测器.py     # 技能状态颜色检测
│   ├── 技能决策引擎.py       # 技能优先级决策算法
│   ├── 技能循环引擎.py       # 主引擎（后台线程支持）
│   ├── 技能循环策略.py       # 策略模式接口
│   ├── 策略接口.py           # 策略管理器
│   ├── 状态监测器.py         # 目标状态监测
│   ├── 目标选择器.py         # 目标选择逻辑
│   └── 依赖容器.py           # 依赖注入容器
├── interface/              # 抽象接口定义
│   ├── 按键操作接口.py
│   ├── 图像获取接口.py
│   ├── 事件监听接口.py
│   ├── Windows图像接口.py   # Windows平台图像获取实现
│   └── 幽灵盒子按键接口.py   # 幽灵盒子硬件适配器
├── config/                 # 配置管理
│   ├── 配置管理器.py         # 增强的配置管理器
│   ├── 基本配置.json         # 基本配置文件
│   ├── 技能配置.json         # 技能配置文件
│   ├── 气劲配置.json         # 气劲配置文件
│   ├── 配置.development.json # 开发环境配置
│   └── 配置.production.json  # 生产环境配置
├── utils/                  # 工具类
│   ├── 性能监控.py           # 性能监控系统
│   ├── 内存管理.py           # 内存优化管理
│   ├── 异常隔离.py           # 统一异常处理
│   ├── 权限控制.py           # 权限管理系统
│   ├── 配置监听器.py         # 配置热重载
│   ├── 日志管理.py           # 日志管理系统
│   ├── 调试工具.py           # 调试支持工具
│   ├── 统一缓存管理器.py     # 缓存管理系统
│   ├── 时间戳优化器.py       # 性能优化工具
│   ├── 异步处理.py           # 异步处理工具
│   ├── 自适应延迟.py         # 智能延迟调整
│   └── 图像缓存.py           # 图像缓存优化
├── drive/                  # 驱动文件目录
│   └── ghostboxm.pyd       # 幽灵盒子驱动（需自行放置）
├── docs/                   # 文档资源
│   ├── API参考文档.md        # 完整API文档
│   ├── 快速使用指南.md       # 快速开始指南
│   ├── 开发人员指南.md       # 开发指南
│   └── 架构设计说明.md       # 架构说明
├── 桌面应用界面.py          # 主桌面应用界面
├── 桌面应用使用指南.md      # 桌面应用使用说明
└── README.md               # 项目说明文档
```

## 🚀 快速开始

### 方法一：使用桌面应用（推荐）

```bash
# 安装依赖
pip install PyQt6 opencv-python numpy pywin32

# 放置幽灵盒子驱动（可选）
# 将 ghostboxm.pyd 文件放到项目根目录或 drive/ 目录下

# 启动桌面应用
python 桌面应用界面.py
```

### 方法二：直接使用引擎

```python
from core.技能循环引擎 import 技能循环引擎

# 创建引擎实例（会自动注册默认接口）
引擎 = 技能循环引擎(配置路径="./config/")

# 启动引擎（后台线程运行）
引擎.start()

# 暂停/恢复
引擎.pause()

# 停止引擎
引擎.stop()

# 获取运行状态
status = 引擎.get_running_status()
print(f"运行中: {status['running']}, 暂停: {status['paused']}")
```

## 📋 功能特性

### 桌面应用功能
- ✅ 现代化暗色主题界面
- ✅ 系统托盘支持
- ✅ 实时状态监控
- ✅ 一键启动/暂停/停止
- ✅ 快捷键操作支持
- ✅ 置顶显示选项
- ✅ 配置热重载

### 引擎核心功能
- ✅ 依赖注入容器
- ✅ 策略模式系统
- ✅ 性能监控统计
- ✅ 异常隔离处理
- ✅ 内存管理优化
- ✅ 自适应延迟调整
- ✅ 统一缓存管理
- ✅ 权限控制机制

## 🔧 配置说明

### 环境配置
项目支持多环境配置：
- `config/配置.development.json` - 开发环境
- `config/配置.production.json` - 生产环境

### 配置示例
```json
{
  "检测区域": [100, 200, 300, 400],
  "蓝条配置": [500, 600, 700, 800],
  "自动选人键值": 1,
  "环境": "development",
  "异常处理": {
    "启用重试机制": true,
    "最大重试次数": 3,
    "重试间隔": 1.0
  }
}
```

## 📚 文档资源

- **快速使用指南**：`docs/快速使用指南.md`
- **开发人员指南**：`docs/开发人员指南.md`
- **API参考文档**：`docs/API参考文档.md`
- **架构设计说明**：`docs/架构设计说明.md`
- **性能优化报告**：`docs/性能优化报告.md`
- **故障排除指南**：`docs/故障排除指南.md`

## 🛠️ 依赖要求

```bash
# 核心依赖
Python >= 3.8
PyQt6 >= 6.0.0
opencv-python >= 4.5.0
numpy >= 1.21.0
pywin32 >= 300       # Windows图像接口

# 可选依赖
watchdog >= 2.0.0    # 配置热重载
```

## 🔍 验证和调试

```bash
# 启动桌面应用进行验证
python 桌面应用界面.py

# 查看日志文件
# 日志保存在 logs/ 目录下
```

## 📄 许可证

MIT License

---

**项目状态**: ✅ 功能完整，架构稳定，文档齐全  
**最后更新**: 2025年12月14日  
**版本**: v2.1.0